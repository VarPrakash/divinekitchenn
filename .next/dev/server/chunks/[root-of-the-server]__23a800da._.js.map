{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/chennupati/OneDrive/Desktop/Divine%20Kitchen/src/app/api/reservation/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\n\nconst WEBHOOK_URL =\n  \"https://prakashvara.app.n8n.cloud/webhook/make-reservation\";\n\nexport async function POST(request: Request) {\n  try {\n    const body = await request.json();\n    const { name, email, phone, partySize, dateTime } = body;\n\n    if (!name || !email || !phone || !partySize || !dateTime) {\n      return NextResponse.json(\n        { error: \"Missing required fields: name, email, phone, partySize, dateTime\" },\n        { status: 400 }\n      );\n    }\n\n    const response = await fetch(WEBHOOK_URL, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ name, email, phone, partySize, dateTime }),\n    });\n\n    // Read the response body as text first (webhook may return JSON or plain text)\n    const responseText = await response.text();\n\n    if (!response.ok) {\n      console.error(\n        `Webhook error: status=${response.status} body=${responseText}`\n      );\n      return NextResponse.json(\n        { error: \"Failed to create reservation. Please try again.\" },\n        { status: 502 }\n      );\n    }\n\n    // Try to parse as JSON, fall back to wrapping the text\n    let data;\n    try {\n      data = JSON.parse(responseText);\n    } catch {\n      data = { message: responseText };\n    }\n\n    return NextResponse.json({ success: true, data });\n  } catch (err) {\n    console.error(\"Reservation API error:\", err);\n    return NextResponse.json(\n      { error: \"Could not reach the reservation service. Please try again later.\" },\n      { status: 502 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cACJ;AAEK,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG;QAEpD,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,SAAS,CAAC,aAAa,CAAC,UAAU;YACxD,OAAO,0LAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAmE,GAC5E;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,WAAW,MAAM,MAAM,aAAa;YACxC,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAM;gBAAO;gBAAO;gBAAW;YAAS;QACjE;QAEA,+EAA+E;QAC/E,MAAM,eAAe,MAAM,SAAS,IAAI;QAExC,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,QAAQ,KAAK,CACX,CAAC,sBAAsB,EAAE,SAAS,MAAM,CAAC,MAAM,EAAE,cAAc;YAEjE,OAAO,0LAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAkD,GAC3D;gBAAE,QAAQ;YAAI;QAElB;QAEA,uDAAuD;QACvD,IAAI;QACJ,IAAI;YACF,OAAO,KAAK,KAAK,CAAC;QACpB,EAAE,OAAM;YACN,OAAO;gBAAE,SAAS;YAAa;QACjC;QAEA,OAAO,0LAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM;QAAK;IACjD,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,0LAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAmE,GAC5E;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}